{"ast":null,"code":"import _classCallCheck from \"/Users/xinshuangzhai/Desktop/Spring2019/CSCI4230/MessageSystem/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/xinshuangzhai/Desktop/Spring2019/CSCI4230/MessageSystem/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/xinshuangzhai/Desktop/Spring2019/CSCI4230/MessageSystem/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/xinshuangzhai/Desktop/Spring2019/CSCI4230/MessageSystem/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/xinshuangzhai/Desktop/Spring2019/CSCI4230/MessageSystem/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/xinshuangzhai/Desktop/Spring2019/CSCI4230/MessageSystem/src/components/Message/index.js\";\nimport React from 'react';\nimport style from './index.module.css';\nimport Linkify from 'react-linkify';\n\nvar time = function time(string) {\n  var date = new Date(string);\n  var minutes = date.getMinutes();\n  return \"\".concat(date.getHours(), \":\").concat(minutes < 10 ? '0' + minutes : minutes);\n};\n\nvar Attachment =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Attachment, _React$Component);\n\n  function Attachment() {\n    _classCallCheck(this, Attachment);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Attachment).apply(this, arguments));\n  }\n\n  _createClass(Attachment, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.props.link) this.setState({\n        src: this.props.link\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.state ? {\n        image: React.createElement(\"img\", {\n          controls: true,\n          src: this.state.src,\n          alt: this.state.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 19\n          },\n          __self: this\n        }),\n        video: React.createElement(\"video\", {\n          controls: true,\n          src: this.state.src,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 21\n          },\n          __self: this\n        }),\n        audio: React.createElement(\"audio\", {\n          controls: true,\n          src: this.state.src,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 22\n          },\n          __self: this\n        }),\n        file: React.createElement(\"a\", {\n          href: this.state.src,\n          download: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 24\n          },\n          __self: this\n        }, \"Download File\")\n      }[this.props.type] : null;\n    }\n  }]);\n\n  return Attachment;\n}(React.Component);\n\nexport var Message = function Message(_ref) {\n  var user = _ref.user,\n      createConvo = _ref.createConvo;\n  return function (message) {\n    return message.sender ? React.createElement(\"li\", {\n      key: message.id,\n      className: style.component,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      onClick: function onClick(e) {\n        return createConvo({\n          user: message.sender\n        });\n      },\n      src: message.sender.avatarURL,\n      alt: message.sender.name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: message.sender.id === user.id || message.sender.presence && message.sender.presence.state === 'online' ? style.online : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, \"\".concat(message.sender.name, \" | \").concat(time(message.createdAt))), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(Linkify, {\n      properties: {\n        target: '_blank'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, message.text)), message.attachment ? React.createElement(Attachment, {\n      user: user,\n      link: message.attachment.link,\n      type: message.attachment.type,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }) : null)) : null;\n  };\n};","map":{"version":3,"sources":["/Users/xinshuangzhai/Desktop/Spring2019/CSCI4230/MessageSystem/src/components/Message/index.js"],"names":["React","style","Linkify","time","string","date","Date","minutes","getMinutes","getHours","Attachment","props","link","setState","src","state","image","name","video","audio","file","type","Component","Message","user","createConvo","message","sender","id","component","e","avatarURL","presence","online","createdAt","target","text","attachment"],"mappings":"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","sourcesContent":["import React from 'react'\nimport style from './index.module.css'\nimport Linkify from 'react-linkify'\n\nconst time = string => {\n  const date = new Date(string)\n  const minutes = date.getMinutes()\n  return `${date.getHours()}:${minutes < 10 ? '0' + minutes : minutes}`\n}\n\nclass Attachment extends React.Component {\n  componentDidMount() {\n    if (this.props.link) this.setState({ src: this.props.link });\n  }\n  render() {\n    return this.state\n      ? {\n          image: (\n            <img controls={true} src={this.state.src} alt={this.state.name} />\n          ),\n          video: <video controls={true} src={this.state.src} />,\n          audio: <audio controls={true} src={this.state.src} />,\n          file: (\n            <a href={this.state.src} download>\n              Download File\n            </a>\n          ),\n        }[this.props.type]\n      : null\n  }\n}\n\nexport const Message = ({ user, createConvo }) => message =>\n  message.sender ? (\n    <li key={message.id} className={style.component}>\n      <img\n        onClick={e => createConvo({ user: message.sender })}\n        src={message.sender.avatarURL}\n        alt={message.sender.name}\n      />\n      <div>\n        <span\n          className={\n            message.sender.id === user.id ||\n            (message.sender.presence &&\n              message.sender.presence.state === 'online')\n              ? style.online\n              : null\n          }\n        >{`${message.sender.name} | ${time(message.createdAt)}`}</span>\n        <p>\n          <Linkify properties={{ target: '_blank' }}>{message.text}</Linkify>\n        </p>\n        {message.attachment ? (\n          <Attachment\n            user={user}\n            link={message.attachment.link}\n            type={message.attachment.type}\n          />\n        ) : null}\n      </div>\n    </li>\n  ) : null\n"]},"metadata":{},"sourceType":"module"}